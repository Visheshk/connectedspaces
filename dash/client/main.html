<head>
  <title>Connected Spaces</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <h1>Connected Spaces</h1>
  <p>Tap your card at the reader to sign in or register!</p>
  {{>videoChat}}
</body>

<template name = "videoChat">
    <h2>Video Chat</h2>
    <button class="toggleStream" id = "audioToggle">Toggle Video</button>
    <div id="video-container">
      <!-- note the 'autoplay' -->
      Their video: <video id="theirVideo" class="theirVideo" autoplay=""></video>
      <video id="myVideo" muted="true" class="myVideo" autoplay></video>: Your video
    </div>

    <h2>Controls</h2>
    <div>
      <p>Your id: <span id="myPeerId">...</span></p>
      <p>Make a call</p><br>
      <input type="text" placeholder="Call user id..." id="remotePeerId">

      <form class = "callPeer">
        <select name = "peer" class = "form-control" id = "peerIds">
          {{#each videoPeers}}
            <option value="{{userId}}">{{state.room}}</option> 
          {{/each}}
        </select>
      </form>
      <p><a href="#" id="makeCall">Call</a></p>
      <p><a href="#" id="endCall">End call</a></p>
    </div>
</template>

<template name = "loading">
  Loading...
</template>

<template name = "noLocation">
  {{#unless currentUser}}
    <h4> This computer does not have a logged in location, so we don't where you are, right now! Ask the librarian/boss person around to log in! </h4>
  {{/unless}}
</template>

<template name = "signUp">
  {{#if currentUser}}
  <h4> Hey there! </h4>
  <p>This is a new card for our system. Enter your details to register it with us! </p>
  <form class = "signup">
    Name: <input type="text" name="name" />
    ZipCode: <input type="number" name="zipcode" />
    <input type="submit" value="submit">
  </form>
  {{/if}}

  {{>noLocation}}
</template>

<template name = "activityEntry">
  {{#if currentUser}}
  Hi {{name}}! &emsp;&emsp;&emsp;&emsp;   <sup>(not you? <a class="updateCard" href="#">Update this card's user details here)</a></sup>
  <form class = "activityForm">
    <input type="text" name="activity" />
    <input type="submit" name="submit" />
  </form>
  <br /><br /><br /><br />
  <p>OR:</p>
  <button class = "logOut">Log out</button>
  {{/if}}

  {{>noLocation}}
</template>

<template name = "locationRegistration">
<br />
  {{> atForm}}
</template>

<template name = "locationSettings">
  
</template>

<template name = "home">
  {{> boxes}}
  {{> videoBox}}
</template>

<template name="boxes"> 
  {{> noLocation}}
  <div class = "row">
    <div id="div1" class="boxdiv col-md-5">
      {{> eachBox}}
    </div>

      <div class = "col-md-1"> </div>
    <div id="div2" class="boxdiv col-md-5">
        {{> eachBox}}
    </div>
  </div>
</template>

<template name="videoBox"> 
  <div class = "row">
    <div id="div3" class="boxdiv col-md-5">
      <h4>Test</h4>
    </div>
    <div class = "col-md-1"> </div>
    <div id="div4" class="boxdiv col-md-5">
      <h4>Video space</h4>
    </div>
  </div>
</template>

<template name = "eachBox">
  <form class = "locationSelector">
    <select name = "location" class = "form-control" id = "location">
      {{#each otherLocations}}
        <option value="{{_id}}">{{username}}</option> 
      {{/each}}
    </select>
  </form>
  
  <div class="panel panel-default">
    <div class="panel-heading">Maker - Activity</div>
    <ul class="list-group">
        {{#each allData}}
        
            <li class="list-group-item">
                <a href="#">{{Name}}</a> â€“ <a href="#">{{CurrentActivity}}</a>
            </li>
        {{/each}}
    </ul>
  </div>
</template>
